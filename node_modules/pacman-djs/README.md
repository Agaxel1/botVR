<div align="center">
  <h1>pacman-djs</h1>
  <p>Modulo para jugar el famoso Pac-Man en discord, puedes construir tus propios mapas!</p>
</div>

## Instalacion:

```shell
npm install pacman-djs --save
```

## Demostracion:

https://youtu.be/pQ0AyjusjSk

## Tabla de contenido
*   [Formato_y_info](#Formato_y_info)
*   [PacGame](#PacGame)
    *   [`start_game`](#start_game)
*   [end](#end)


## Formato_y_info
<a name="Formato_y_info" />

En este juego se pueden recoger monedas, tambien hay fantasmas las cuales te perseguiran si estas en un rango especifico **(menor o igual a 4)**

La distancia se calcula de esta manera:

```js
let pos_x = player.x - ghost.x
let pos_y = player.y - ghost.y
let dis = Math.sqrt((pos_x*pos_x)+(pos_y*pos_y))
```

Teniendo en cuenta esto, los fantasmas que esten en un rango inferior o igual a 4 de ti comenzaran a perseguirte hasta matarte (esa es su mision)

Para construir un mapa debes de tener en cuenta los siguientes simbolos:

- ·óß => Pacman
- ·ó£ => Fantasma
- ‚ñ© => Piso
- ‚ñ£ => Pared
- ‚óá => Moneda

- ·óß El pacman que tu controlaras al jugar.
- ·ó£ Son los fantasmas que te perseguiran.
- ‚ñ© El piso, practicamente por donde los fantasma y tu (pacman) podran avanzar.
- ‚óá Las monedas que podras ir recogiendo
- ‚ñ£ La pared, practicamente por donde los fantasmas y tu (pacman) no podran avanzar.

IMPORTANTE:

- Solo debes de colocar un pacman (·óß) por mapa.
- Es obligatorio poner al menos 1 fantasma (·ó£) por mapa, tambien puedes poner varios pero te recomiendo colocar pocos.
- Es obligatorio poner al menos 1 moneda (‚óá) por mapa, tambien puedes poner varios.
- Es obligatorio colocar la pared (‚ñ£) alrededor de el mapa que usaras.

Teniendo en cuenta lo de arriba, la manera de construir un mapa es usando un array que contenga strings, en estos strings ustedes deben de formar el mapa, por ejemplo:

```js
let mapa = [
  "‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£",
  "‚ñ£‚ñ©‚óá‚óá‚óá‚ñ©‚ñ©‚ñ©·ó£‚ñ©‚ñ©‚ñ©‚óá‚óá‚óá‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ£‚óá‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚óá‚ñ£‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£",
  "‚ñ£‚óá‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©·ó£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚óá‚ñ£",
  "‚ñ£‚óá‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚óá‚ñ£",
  "‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ£‚óá‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚óá‚ñ£‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚óá‚óá‚óá‚ñ©‚ñ©‚ñ©·óß‚ñ©‚ñ©‚ñ©‚óá‚óá‚óá‚ñ©‚ñ£",
  "‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£"
]
```
![foto1](https://cdn.discordapp.com/attachments/622208215043538954/641081412606230540/unknown.png)
 
Al comenzar la partida tendras 4 emojis de las cuales puedes usar para mover tu personaje (pacman):

- ‚¨Ö => izquierda
- ‚û° => derecha
- ‚¨Ü => arriba
- ‚¨á => abajo


## PacGame
<a name="PacGame" />

```js
PacGame(mapa, tiempo, opciones)
```

Este constructor te servir√° para colocar el mapa y las opciones que tendr√°.

Recuerda leer [Formato_y_info](#Formato_y_info) para informarte sobre como construir un mapa.

Parametros | Opcional | Default | Descripcion
--- | --- | --- | ---
`mapa` |  |  | Aqui deber√° de ir el mapa que se jugara, debe ser un **array**.
`mapa` |  |  | Aqui deber√° de ir el tiempo maximo que tendra el mapa en caso que el jugador no pierda ni gane, el tiempo es en **minutos**.
`opciones` | Si |  | Aqui deber√°s de colocar un **objeto** con diferentes opciones.
`opciones.win_text` | Si | "GANASTE!" | Aqui deber√°s de colocar el texto que se mostrara cuando el jugador gane.
`opciones.to_lose_text` | Si | "PERDISTE :(" | Aqui deber√°s de colocar el texto que se mostrara cuando el jugador pierda.
`opciones.time_out_text` | Si | "SE ACABO EL TIEMPO" | Aqui deber√°s de colocar el texto que se mostrara cuando el jugador no pierda ni gane y el tiempo del mapa haya acabado.
`opciones.coin_points` | Si | 250 | Aqui deber√°s de colocar la cantidad de puntos que dar√° una moneda.
`opciones.coin_text` | Si | "MONEDAS" | Aqui deber√°s de colocar el texto que ira antes del marcador de los puntos actuales que tiene el jugador.
`opciones.time_text` | Si | "TIEMPO" | Aqui deber√°s de colocar el texto que ira antes del marcador del tiempo transcurrido.


Por ejemplo:

```js
const game = require("pacman-djs");

let mapa = [
  "‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£",
  "‚ñ£‚ñ©‚óá‚óá‚óá‚ñ©‚ñ©‚ñ©·ó£‚ñ©‚ñ©‚ñ©‚óá‚óá‚óá‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ£‚óá‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚óá‚ñ£‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£",
  "‚ñ£‚óá‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©·ó£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚óá‚ñ£",
  "‚ñ£‚óá‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚óá‚ñ£",
  "‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ£‚óá‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚óá‚ñ£‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚óá‚óá‚óá‚ñ©‚ñ©‚ñ©·óß‚ñ©‚ñ©‚ñ©‚óá‚óá‚óá‚ñ©‚ñ£",
  "‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£"
]

let start = new game.PacGame(mapa, 3)

/*
O TAMBIEN USANDO LAS OPCIONES:

let start = new game.PacGame(mapa, 3, {
  win_text: message.author.username + " ganaste!",
  to_lose_text: message.author.username + " perdiste!",
  time_out_text: "Se acabo el tiempo!",
  coin_points: 20,
  coin_text: "üí∞",
  time_text: "‚è≤"
})

*/
```


##### start_game
<a name="start_game" />

```js
start_game(message)
```

Este metodo te permitir√° comenzar la partida.

Parametros | Descripcion
--- | ---
`message` | Aqui deber√°s de colocar el **mensaje** que se emite en el evento message.


Ejemplo:

```js
start.start_game(message)
```


## end
<a name="end" />

```js
.on("end", (type, monedas, tiempo) => {})
```

Este evento se emitir√° en los siguientes casos:

- Cuando el jugador gana.
- Cuando el jugador pierda.
- Cuando el tiempo del mapa ha acabado.
- Cuando ocurre algun error.


Parametros | Descripcion
--- | ---
`type` | Este parametro retornar√° tener 3 tipos de valores, **"ghost"** cuando el jugador perdio, **"player"** cuando el jugador gan√≥, **"time"** cuando el tiempo del mapa ha acabado, **"error"** cuando ocurre un error.
`monedas` | Este parametro retornar√° la cantidad de monedas(puntos) que el jugador logr√≥ obtener en el mapa.
`tiempo` | Este parametro retornar√° el tiempo que ha transcurrido desde que el jugador comenzo a jugar hasta el momento en el que este evento se haya emitido **(el tiempo es en milisegundos)**. 


Ejemplo:

```js
const game = require("pacman-djs");

let mapa = [
  "‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£",
  "‚ñ£‚ñ©‚óá‚óá‚óá‚ñ©‚ñ©‚ñ©·ó£‚ñ©‚ñ©‚ñ©‚óá‚óá‚óá‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ£‚óá‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚óá‚ñ£‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£",
  "‚ñ£‚óá‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©·ó£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚óá‚ñ£",
  "‚ñ£‚óá‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚ñ©‚óá‚ñ£",
  "‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ£‚ñ£‚ñ©‚ñ©‚ñ©‚ñ©‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚ñ£‚ñ£‚óá‚ñ£‚ñ©‚ñ©‚ñ£‚ñ©‚ñ©‚ñ£‚óá‚ñ£‚ñ£‚ñ©‚ñ£",
  "‚ñ£‚ñ©‚óá‚óá‚óá‚ñ©‚ñ©‚ñ©·óß‚ñ©‚ñ©‚ñ©‚óá‚óá‚óá‚ñ©‚ñ£",
  "‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£‚ñ£"
]

let start = new game.PacGame(mapa, 3, {
  win_text: message.author.username + " ganaste!",
  to_lose_text: message.author.username + " perdiste!",
  time_out_text: "Se acabo el tiempo!",
  coin_points: 20,
  coin_text: "üí∞",
  time_text: "‚è≤"
})

start.start_game(message)

start.on("end", (type, monedas, tiempo) => {
  if(type == "ghost") {
    //haz algo
  }
  else if(type == "player") {
    //haz algo
  }
  else if(type == "time") {
    //haz algo
  }
  else if(type == "error") {
    //haz algo
  }
})
```
![foto2](https://cdn.discordapp.com/attachments/622208215043538954/641081949867212801/unknown.png)


Podrias usar este evento para guardar los datos del usuario en una database, hacer leaderboards de los jugadores con mayor monedas(puntos), etc.

Que lo disfrutes.